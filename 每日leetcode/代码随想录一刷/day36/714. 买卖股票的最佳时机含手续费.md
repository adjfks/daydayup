@[TOC](ğŸš…ã€leetcodeã€‘714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/7bd3cd5ef8154d7da99e5cd9badf12f4.png#pic_center)

# ğŸš€é¢˜ç›®
[leetcodeåŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/)
> ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ pricesï¼Œå…¶ä¸­ prices[i]è¡¨ç¤ºç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ï¼›æ•´æ•° fee ä»£è¡¨äº†äº¤æ˜“è‚¡ç¥¨çš„æ‰‹ç»­è´¹ç”¨ã€‚
> ä½ å¯ä»¥æ— é™æ¬¡åœ°å®Œæˆäº¤æ˜“ï¼Œä½†æ˜¯ä½ æ¯ç¬”äº¤æ˜“éƒ½éœ€è¦ä»˜æ‰‹ç»­è´¹ã€‚å¦‚æœä½ å·²ç»è´­ä¹°äº†ä¸€ä¸ªè‚¡ç¥¨ï¼Œåœ¨å–å‡ºå®ƒä¹‹å‰ä½ å°±ä¸èƒ½å†ç»§ç»­è´­ä¹°è‚¡ç¥¨äº†ã€‚
> è¿”å›è·å¾—åˆ©æ¶¦çš„æœ€å¤§å€¼ã€‚
> æ³¨æ„ï¼šè¿™é‡Œçš„ä¸€ç¬”äº¤æ˜“æŒ‡ä¹°å…¥æŒæœ‰å¹¶å–å‡ºè‚¡ç¥¨çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œæ¯ç¬”äº¤æ˜“ä½ åªéœ€è¦ä¸ºæ”¯ä»˜ä¸€æ¬¡æ‰‹ç»­è´¹ã€‚

 

>ç¤ºä¾‹ 1ï¼š
>è¾“å…¥ï¼šprices = [1, 3, 2, 8, 4, 9], fee = 2
>è¾“å‡ºï¼š8
>è§£é‡Šï¼šèƒ½å¤Ÿè¾¾åˆ°çš„æœ€å¤§åˆ©æ¶¦:  
>åœ¨æ­¤å¤„ä¹°å…¥ prices[0] = 1
>åœ¨æ­¤å¤„å–å‡º prices[3] = 8
>åœ¨æ­¤å¤„ä¹°å…¥ prices[4] = 4
>åœ¨æ­¤å¤„å–å‡º prices[5] = 9
>æ€»åˆ©æ¶¦: ((8 - 1) - 2) + ((9 - 4) - 2) = 8


>ç¤ºä¾‹ 2ï¼š
>è¾“å…¥ï¼šprices = [1,3,7,5,10,3], fee = 3
>è¾“å‡ºï¼š6


>æç¤ºï¼š
>1 <= prices.length <= 5 * 104
>1 <= prices[i] < 5 * 104
>0 <= fee < 5 * 104


# ğŸ’¥leetcodeä»£ç æ¨¡æ¿

```javascript
/**
 * @param {number[]} prices
 * @param {number} fee
 * @return {number}
 */
var maxProfit = function(prices, fee) {

};
```

# ğŸš€æ€è·¯
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/470f6b9e77f74bc390c692ed5c64bdeb.gif#pic_center)



# ğŸ’»ä»£ç 
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/50b64835a43344369939c44437475cc5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5YmN56uvY29ybmVy,size_8,color_FFFFFF,t_70,g_se,x_16#pic_center)
è¦æƒ³è·å¾—æœ€å¤§åˆ©æ¶¦ï¼Œæ¯ä¸€æ¬¡è‚¡ç¥¨äº¤æ˜“éƒ½åº”è¯¥å±€éƒ¨æœ€ä½ç‚¹ä¹°å…¥ï¼Œå±€éƒ¨æœ€é«˜ç‚¹å–å‡ºã€‚

è¿™é“é¢˜ç›®è¿˜éœ€è¦è€ƒè™‘äº¤æ˜“çš„æ‰‹ç»­è´¹ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°è‚¡ç¥¨åˆ©æ¶¦æ¯”æ‰‹ç»­è´¹è¿˜ä½çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå°±ä¸èƒ½è¿›è¡Œäº¤æ˜“ã€‚

é‚£ä¹ˆåº”è¯¥ä»€ä¹ˆæ—¶å€™ä¹°å…¥ï¼Ÿä»€ä¹ˆæ—¶å€™å–å‡ºå‘¢ï¼Ÿ
ä¹°å…¥çš„æ—¶æœºå°±æ˜¯å±€éƒ¨çš„æœ€ä½ç‚¹ï¼Œéå†æ•°ç»„è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°æ›´ä½çš„ä»·æ ¼å°±æ›´æ–°ä¸€ä¸‹ã€‚
å–å‡ºçš„æ—¶æœºè¿˜è¦è€ƒè™‘æ‰‹ç»­è´¹çš„å› ç´ ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å½“å¤©å–å‡ºçš„åˆ©æ¶¦ï¼ˆæ‰£é™¤æ‰‹ç»­è´¹ï¼‰ï¼Œå¦‚æœåˆ©æ¶¦å¤§äº0ï¼Œé‚£ä¹ˆå°±æ”¶è·è¿™éƒ¨åˆ†çš„åˆ©æ¶¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼š**æ”¶è·åˆ©æ¶¦çš„æ—¶å€™å¯èƒ½å¹¶ä¸æ˜¯å–å‡ºçš„æ—¶æœº**ï¼Œåªæ˜¯æå‰æŠŠä¹‹åçš„åˆ©æ¶¦å…ˆæ”¶ä¸€éƒ¨åˆ†ï¼Œæ­¤æ—¶éœ€è¦æ›´æ–°æœ€ä½ä»·æ ¼ä¸ºå½“å‰è‚¡ç¥¨ä»·æ ¼å‡å»æ‰‹ç»­è´¹ã€‚ä¸ºä»€ä¹ˆè¦å‡å»æ‰‹ç»­è´¹å‘¢ï¼Ÿå› ä¸ºè¦é¿å…åŒä¸€æ¬¡äº¤æ˜“æ‰£é™¤å¤šæ¬¡æ‰‹ç»­è´¹ã€‚

å…·ä½“æ¥è¯´ï¼Œå¯¹äºç¬¬iå¤©çš„è‚¡ç¥¨ä»·æ ¼æœ‰å‡ ç§æƒ…å†µ(ç”¨`minPrice`è®°å½•æœ€ä½ä»·æ ¼)ï¼š
- `prices[i] < minPrice`ï¼Œæ­¤æ—¶è¦æ›´æ–°æœ€ä½ä»·æ ¼`minPrice = prices[i]`
- `prices[i] > minPrice + fee`ï¼Œå³èƒ½æ”¶è·æ­£åˆ©æ¶¦ï¼Œæ­¤æ—¶è¦æ”¶è·è¿™éƒ¨åˆ†åˆ©æ¶¦ï¼Œå¹¶ä¸”æ›´æ–°æœ€ä½ä»·æ ¼ä¸º`minPrice - fee`


```js
var maxProfit = function(prices, fee) {
    let ans = 0 // è®°å½•æ€»åˆ©æ¶¦
    let minPrice = prices[0]
    for(let i = 1 ; i < prices.length ; i++){
        if(prices[i] < minPrice) minPrice = prices[i]
        if(prices[i] > minPrice + fee){
            ans += prices[i] - minPrice - fee   // æ”¶è·è¯¥åˆ©æ¶¦
            minPrice = prices[i] - fee  // æ›´æ–°æœ€ä½ä»·æ ¼  
        }
    }
    return ans
};
```


<br>

> âœ¨$\textcolor{green}{æˆ‘æ˜¯conerï¼Œè¯·åˆ«å…³æ³¨æˆ‘çš„ä¸“æ ï¼Œæœ¬ç³»åˆ—æ–‡ç« ä¸ºä¸ªäººåˆ·é¢˜è®°å½•ï¼ˆå·å·è‡ªå·±å·ğŸ¤¤ï¼‰ï¼š}$[leetcodeé¢˜è§£js](https://blog.csdn.net/laplacepoisson/category_11759331.html?spm=1001.2014.3001.5482)<br/>
> âœ¨$\textcolor{green}{æ¯å¤©æ—©ä¸Šæ›´æ–°3é“leetcodeé¢˜ç›®çš„jsé¢˜è§£ğŸš€ğŸš€ğŸš€}$<br/>